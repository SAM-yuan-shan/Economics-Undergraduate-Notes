# 连续型随机变量及其分布

与离散型随机变量不同，连续型随机变量的可能取值充满一个或几个区间，其取值无限且不可列。因此，无法用表格或列举法表示其概率分布。我们可以借鉴学习数据图表展示时使用直方图来展示连续型数据分布规律的方法。

## 从频数分布直方图到概率密度

假设我们有一组数据量为 $n$ 的数据，其频数分布直方图如下（左图示意）：
* 横轴：数据分组
* 纵轴：对应组的频数

如果一个连续型随机变量的取值范围与数据范围一致，并采用同样的分组方式，我们不能直接用纵轴表示频数，因为任何一个组内随机变量可能的取值都是无穷多个，频数无法绘制。

**改进1：纵轴表示概率**
我们可以用纵轴表示随机变量落在该组的概率。此时，矩形的高度代表对应组的概率。
* **缺点**：这种图对组数或组距的变化非常敏感。
    * 当组数增多，组距变小，随机变量落在每个组的概率也随之变小，导致矩形高度下降。
    * 即使是同一个随机变量，不同的组数或组距会导致分布形态的显著差异，不利于比较。

**改进2：纵轴表示概率密度 (Probability Density)**
为了克服上述缺点，我们用纵轴表示 **概率 / 组距**，这个值称为 **概率密度** (简称密度)。
$$ \text{密度} = \frac{\text{概率}}{\text{组距}} $$
* **密度 (Density)**：矩形的高度，表示单位组距内的概率。
* **概率 (Probability)**：随机变量落在该组的概率。
* **组距 (Group Width)**：每个分组的宽度。

在这种情况下，矩形的面积变为：
$$ \text{面积} = \text{密度} \times \text{组距} = \left( \frac{\text{概率}}{\text{组距}} \right) \times \text{组距} = \text{概率} $$
* **面积 (Area)**：矩形的面积。
* **密度 (Density)**：矩形的高度。
* **组距 (Group Width)**：矩形的宽度。
* **概率 (Probability)**：该面积代表随机变量落入对应组的真实概率。

因此，所有矩形面积之和（即总概率）等于 1。
$$ \sum S_i = 1 $$
* $\sum$：求和符号，表示对所有组进行加总。
* $S_i$：第 $i$ 个矩形的面积，代表随机变量落在第 $i$ 组的概率。
* $1$：表示所有可能结果的概率之和为1。

采用这种方式，即使组数变化，整体分布的轮廓也能保持相对稳定。当组数增多，组距变小，每组的概率（面积）会变小，这主要体现在矩形宽度变小，对高度（密度）的影响相对有限。

## 概率密度曲线 (Probability Density Curve)

当组数不断增多并趋于无穷时，组距趋于零，这些矩形的总体轮廓会形成一条平滑的曲线，即 **概率密度曲线** (Probability Density Curve)，通常用 $f(x)$ 表示。

* **目的**：使我们能够关注随机变量在任意一个区间 $[a, b]$ 上的概率。如果组数有限，可能无法精确表示任意指定区间的概率。
* **区间概率**：从 $a$ 到 $b$ 这个区间对应的概率，就是密度曲线在 $[a, b]$ 范围内与 x 轴围成的面积。
* **单点概率**：对于连续型随机变量，任意单个点的概率为零。这是因为当组距趋于零时，单个点对应的“矩形”宽度为零，面积也为零。
    $$ P(X=b) = 0 $$
    * $P(X=b)$：随机变量 $X$ 取特定值 $b$ 的概率。
    * $0$：表示对于连续型随机变量，其在任何单一点的概率均为零。
* **总面积**：在随机变量的整个取值范围内，密度曲线之下、x 轴之上围成的总面积等于 1，这来源于之前所有小矩形面积之和。
* **曲线高度的含义**：概率密度曲线上任一点的高度 $f(x)$ 是 **概率密度**，而不是该点的概率。

## 密度函数 $f(x)$ (Probability Density Function, PDF)

概率密度曲线可以用一个函数 $f(x)$ 来描述，称为 **概率密度函数**。$f(x)$ 对应曲线上点 $x$ 处的高度，即该点的密度值。

任何一个概率密度函数 $f(x)$ 都必须满足以下两个条件：
1.  **非负性**：函数值（曲线高度）必须大于等于零。
    $$ f(x) \ge 0 $$
    * $f(x)$：在点 $x$ 处的概率密度值。
    * $\ge 0$：表示概率密度值不能为负。
2.  **归一性**：密度函数在整个取值范围（通常是负无穷到正无穷）上的积分值等于 1。这表示曲线与 x 轴围成的总面积为 1。
    $$ \int_{-\infty}^{\infty} f(x)dx = 1 $$
    * $\int_{-\infty}^{\infty}$: 从负无穷到正无穷的定积分。
    * $f(x)$: 概率密度函数。
    * $dx$: 表示对变量 $x$ 进行积分。
    * $1$: 表示总概率为1。

随机变量 $X$ 在区间 $[a, b]$ 上的概率，等于密度函数 $f(x)$ 在该区间上的积分，也即密度曲线在 $[a, b]$ 上与 x 轴围成的面积。
$$ P(a \le X \le b) = \int_{a}^{b} f(x)dx $$
* $P(a \le X \le b)$: 随机变量 $X$ 的值落在区间 $[a, b]$ 内的概率。
* $\int_{a}^{b} f(x)dx$: 密度函数 $f(x)$ 从 $a$ 到 $b$ 的定积分，代表该区间下曲线围成的面积。

## 分布函数 $F(x)$ (Cumulative Distribution Function, CDF)

**分布函数** $F(x)$ 表示随机变量 $X$ 小于或等于某个值 $x$ 的概率。其值是真实的概率。
$$ F(x) = P(X \le x) = \int_{-\infty}^{x} f(t)dt $$
* $F(x)$: 分布函数在点 $x$ 的值。
* $P(X \le x)$: 随机变量 $X$ 取值不大于 $x$ 的概率。
* $\int_{-\infty}^{x} f(t)dt$: 概率密度函数 $f(t)$ 从负无穷到 $x$ 的积分。这里用 $t$ 作为积分变量以区别于积分上限 $x$。这代表密度曲线在 $x$ 左侧与 x 轴围成的面积。

用分布函数表示随机变量在区间 $(a, b]$ 上的概率：
$$ P(a < X \le b) = F(b) - F(a) $$
* $P(a < X \le b)$: 随机变量 $X$ 的值大于 $a$且小于等于 $b$ 的概率。
* $F(b)$: $P(X \le b)$，即 $b$ 左侧的总面积。
* $F(a)$: $P(X \le a)$，即 $a$ 左侧的总面积。
* $F(b) - F(a)$: $b$ 左侧面积减去 $a$ 左侧面积，即区间 $(a, b]$ 对应的面积。

**重要说明**：对于连续型随机变量，由于单点概率为零 ($P(X=c)=0$)，以下区间概率是相等的：
$P(a < X < b) = P(a \le X < b) = P(a < X \le b) = P(a \le X \le b)$
因此，在计算区间概率时，是否包含端点通常不影响结果。

## 连续型随机变量的期望和方差

**期望 (Expectation)** $E(X)$：
$$ E(X) = \int_{-\infty}^{\infty} x f(x)dx $$
* $E(X)$：连续型随机变量 $X$ 的期望值或均值。
* $\int_{-\infty}^{\infty}$：对应离散型中的连加 $\sum$。
* $x$：对应离散型中的取值 $x_i$。
* $f(x)dx$：表示随机变量 $X$ 在一个极小区间 $dx$ 内取值的概率（可理解为小矩形的面积），对应离散型中的概率 $P(X=x_i)$。

**方差 (Variance)** $D(X)$ 或 $\text{Var}(X)$：
$$ D(X) = \text{Var}(X) = \int_{-\infty}^{\infty} (x - E(X))^2 f(x)dx $$
* $D(X)$ 或 $\text{Var}(X)$：连续型随机变量 $X$ 的方差。
* $\int_{-\infty}^{\infty}$：对应离散型中的连加 $\sum$。
* $(x - E(X))^2$：离均差的平方，衡量 $x$ 值与其期望值的偏离程度的平方。
* $f(x)dx$：对应离散型中的概率 $P(X=x_i)$。

> [!NOTE] 注意
> 本教材不要求记忆连续型期望和方差的计算公式。离散型随机变量期望和方差的性质，对于连续型随机变量同样适用。

# 正态分布 (Normal Distribution)

正态分布是描述连续型随机变量的最重要的分布，也是统计推断的基础。

## 正态分布的密度曲线与密度函数

正态分布的密度曲线呈 **钟形对称**，取值范围为整个实数轴 $(-\infty, +\infty)$。
其概率密度函数 $f(x)$ 为：
$$ f(x) = \frac{1}{\sigma\sqrt{2\pi}} e^{-\frac{(x-\mu)^2}{2\sigma^2}} $$
* $f(x)$：正态分布在点 $x$ 处的概率密度。
* $\mu$ (mu)：正态分布的期望或均值，决定了分布的中心位置。
* $\sigma$ (sigma)：正态分布的标准差 ($\sigma > 0$)，决定了分布的离散程度或曲线的“胖瘦”。
* $\sigma^2$ (sigma squared)：正态分布的方差。
* $\pi$ (pi)：圆周率，一个数学常数 (约 3.14159)。
* $e$：自然对数的底数，一个数学常数 (约 2.71828)。
* $x$：随机变量的取值。

如果一个随机变量 $X$ 的密度函数为此形式，则称 $X$ 服从参数为 $\mu$ 和 $\sigma^2$ 的正态分布，记作：
$$ X \sim N(\mu, \sigma^2) $$
* $X$：随机变量。
* $\sim$：“服从于”或“分布为”。
* $N$：表示正态分布 (Normal)。
* $\mu$：第一个参数，均值。
* $\sigma^2$：第二个参数，方差。

**性质**：
* **对称性**：密度曲线关于直线 $x=\mu$ 对称。
* **峰值**：在 $x=\mu$ 处，密度函数取得最大值。指数部分 $-\frac{(x-\mu)^2}{2\sigma^2}$ 在 $x=\mu$ 时为0，$e^0=1$，所以最大值为：
    $$ f_{max} = f(\mu) = \frac{1}{\sigma\sqrt{2\pi}} $$
    * $f_{max}$ 或 $f(\mu)$: 密度函数的最大值，发生在均值 $\mu$ 处。
    * $\frac{1}{\sigma\sqrt{2\pi}}$: 最大值的具体表达式。
* **参数影响**：
    * $\mu$ (均值)：决定曲线的中心位置。$\mu$ 增大，曲线向右平移。
    * $\sigma$ (标准差)：决定曲线的形状。
        * $\sigma$ 越小，数据分布越集中，曲线越高越瘦。
        * $\sigma$ 越大，数据分布越分散，曲线越矮越胖。

许多现实生活中的现象和数据近似服从正态分布，如身高、体重、测量误差、考试分数等。

## 标准正态分布 (Standard Normal Distribution)

由于不同正态分布的参数 $\mu$ 和 $\sigma$ 各不相同，给计算带来不便。因此，引入了一个特殊的正态分布——**标准正态分布**。

标准正态分布是期望 $\mu=0$，标准差 $\sigma=1$ (因此方差 $\sigma^2=1$) 的正态分布。
其密度函数通常用 $\phi(x)$ (phi) 表示：
$$ \phi(x) = \frac{1}{\sqrt{2\pi}} e^{-\frac{x^2}{2}} $$
* $\phi(x)$：标准正态分布在点 $x$ 处的概率密度。将 $\mu=0, \sigma=1$ 代入一般正态分布密度函数即可得到。
* $x$：标准正态随机变量的取值 (常记为 $Z$)。

其分布函数用 $\Phi(x)$ (大写 Phi) 表示：
$$ \Phi(x) = P(Z \le x) = \int_{-\infty}^{x} \frac{1}{\sqrt{2\pi}} e^{-\frac{t^2}{2}} dt $$
* $\Phi(x)$: 标准正态分布的累积分布函数 (CDF) 在点 $x$ 的值。
* $P(Z \le x)$: 标准正态随机变量 $Z$ 取值不大于 $x$ 的概率。
* $\int_{-\infty}^{x} \frac{1}{\sqrt{2\pi}} e^{-\frac{t^2}{2}} dt$: 标准正态密度函数从负无穷到 $x$ 的积分。

标准正态分布的记号为：
$$ Z \sim N(0, 1) $$
* $Z$：通常用来表示标准正态随机变量。
* $N(0, 1)$：表示均值为0，方差为1的正态分布。

**核心优势：标准化**
任何一个服从一般正态分布 $X \sim N(\mu, \sigma^2)$ 的随机变量，都可以通过 **标准化 (Standardization)** 转换为服从标准正态分布的随机变量 $Z$：
$$ Z = \frac{X-\mu}{\sigma} $$
* $Z$：标准化后的随机变量，服从 $N(0, 1)$。
* $X$：原始的服从 $N(\mu, \sigma^2)$ 的随机变量。
* $\mu$：原始随机变量 $X$ 的均值。
* $\sigma$：原始随机变量 $X$ 的标准差。

通过期望和方差的性质可以证明 $E(Z)=0$，$D(Z)=1$。更重要的是，可以证明 $Z$ 的密度函数确实是标准正态分布的密度函数 $\phi(z)$。

## 标准正态分布的性质和应用

假设 $Z \sim N(0, 1)$：
1.  **对称性性质**：
    $$ \Phi(-x) = 1 - \Phi(x) $$
    * $\Phi(-x)$：$P(Z \le -x)$，即标准正态曲线在 $-x$ 左侧的面积。
    * $1 - \Phi(x)$：$1 - P(Z \le x) = P(Z > x)$。由于标准正态曲线关于0对称，$P(Z > x) = P(Z < -x)$。
    【图示理解：$-x$ 左侧的尾部面积等于 $x$ 右侧的尾部面积。】

2.  **区间概率**：
    $$ P(a < Z < b) = \Phi(b) - \Phi(a) $$
    * $P(a < Z < b)$: 标准正态变量 $Z$ 落在区间 $(a,b)$ 内的概率。
    * $\Phi(b)$: $P(Z \le b)$。
    * $\Phi(a)$: $P(Z \le a)$。

3.  **关于原点对称区间的概率**：
    $$ P(|Z| \le a) = P(-a \le Z \le a) = \Phi(a) - \Phi(-a) $$
    利用性质1，$\Phi(-a) = 1 - \Phi(a)$，代入得：
    $$ P(|Z| \le a) = \Phi(a) - (1 - \Phi(a)) = 2\Phi(a) - 1 $$
    * $P(|Z| \le a)$: 标准正态变量 $Z$ 的绝对值不大于 $a$ 的概率，即 $Z$ 落在 $[-a, a]$ 区间的概率。
    * $2\Phi(a) - 1$: 计算此概率的便捷公式。

**查表与计算示例** (假设 $Z \sim N(0, 1)$)：
标准正态分布表通常提供 $\Phi(x)$ 在 $x \ge 0$ 时的值。
* $\Phi(0) = 0.5$
* 若 $x < 0$，则利用 $\Phi(x) = 1 - \Phi(-x)$ 来计算，其中 $-x > 0$ 可以在表中查到。

**例题：**
1.  求 $P(Z < 1.5)$
    $$ P(Z < 1.5) = \Phi(1.5) $$
    * $\Phi(1.5)$: 直接查标准正态分布表得到 $1.5$ 对应的累积概率值。

2.  求 $P(Z > 2)$
    $$ P(Z > 2) = 1 - P(Z \le 2) = 1 - \Phi(2) $$
    * $1 - \Phi(2)$: 用1减去 $Z \le 2$ 的概率（查表得到 $\Phi(2)$）。

3.  求 $P(-1 < Z < 3)$
    $$ P(-1 < Z < 3) = \Phi(3) - \Phi(-1) $$
    由于 $\Phi(-1) = 1 - \Phi(1)$，所以：
    $$ P(-1 < Z < 3) = \Phi(3) - (1 - \Phi(1)) = \Phi(3) + \Phi(1) - 1 $$
    * $\Phi(3)$: 查表得到。
    * $\Phi(-1)$: 先用对称性转换为 $1-\Phi(1)$，再查表得到 $\Phi(1)$。

4.  求 $P(|Z| < 2)$
    $$ P(|Z| < 2) = P(-2 < Z < 2) = 2\Phi(2) - 1 $$
    * $2\Phi(2) - 1$: 查表得到 $\Phi(2)$，然后代入公式计算。

> [!TIP] 计算技巧
> * 遇到 $P(Z > a)$，转换为 $1 - P(Z \le a) = 1 - \Phi(a)$。
> * 遇到 $\Phi(负数)$，例如 $\Phi(-a)$ (其中 $a>0$)，转换为 $1 - \Phi(a)$。

## 利用标准正态分布解决一般正态分布问题

标准正态分布最大的意义在于，任何一般正态分布 $X \sim N(\mu, \sigma^2)$ 的概率问题，都可以通过标准化转换为标准正态分布的问题来解决。

若 $X \sim N(\mu, \sigma^2)$，我们要求 $P(a < X < b)$：
1.  **标准化不等式**：对不等式中的每一项进行相同的标准化操作（减去均值 $\mu$，除以标准差 $\sigma$）。由于 $\sigma > 0$，不等号方向不变。
    $$ P(a < X < b) = P\left(\frac{a-\mu}{\sigma} < \frac{X-\mu}{\sigma} < \frac{b-\mu}{\sigma}\right) $$
    * $\frac{a-\mu}{\sigma}$: 区间下限 $a$ 标准化后的值，记为 $z_a$。
    * $\frac{X-\mu}{\sigma}$: 随机变量 $X$ 标准化后的形式，即 $Z$。
    * $\frac{b-\mu}{\sigma}$: 区间上限 $b$ 标准化后的值，记为 $z_b$。
2.  **转换为标准正态概率**：此时中间项 $\frac{X-\mu}{\sigma}$ 服从标准正态分布 $N(0, 1)$。
    $$ P(a < X < b) = P(z_a < Z < z_b) $$
3.  **使用标准正态分布函数计算**：
    $$ P(z_a < Z < z_b) = \Phi(z_b) - \Phi(z_a) $$
    * $\Phi(z_b)$: 标准正态CDF在 $z_b$ 处的值。
    * $\Phi(z_a)$: 标准正态CDF在 $z_a$ 处的值。
    这两个值可以通过查标准正态分布表获得（必要时结合对称性）。

**例题：**
假设 $X \sim N(\mu=5, \sigma=3)$ （即方差 $\sigma^2=9$）。

1.  求 $P(X \le 10)$
    $$ P(X \le 10) = P\left(\frac{X-5}{3} \le \frac{10-5}{3}\right) $$
    * $\frac{X-5}{3}$: 对随机变量 $X$ 进行标准化，令 $Z = \frac{X-5}{3}$。
    * $\frac{10-5}{3}$: 对值 $10$ 进行同样的标准化操作，结果为 $\frac{5}{3}$。
    $$ P(X \le 10) = P\left(Z \le \frac{5}{3}\right) = \Phi\left(\frac{5}{3}\right) $$
    * $\Phi\left(\frac{5}{3}\right)$: 查标准正态分布表得到 $\frac{5}{3} \approx 1.67$ 对应的累积概率值。

2.  求 $P(2 < X < 10)$
    $$ P(2 < X < 10) = P\left(\frac{2-5}{3} < \frac{X-5}{3} < \frac{10-5}{3}\right) $$
    * $\frac{2-5}{3}$: 对值 $2$ 进行标准化，结果为 $\frac{-3}{3} = -1$。
    * $\frac{10-5}{3}$: 对值 $10$ 进行标准化，结果为 $\frac{5}{3}$。
    $$ P(2 < X < 10) = P\left(-1 < Z < \frac{5}{3}\right) $$
    $$ P\left(-1 < Z < \frac{5}{3}\right) = \Phi\left(\frac{5}{3}\right) - \Phi(-1) $$
    因为 $\Phi(-1) = 1 - \Phi(1)$，所以：
    $$ P\left(-1 < Z < \frac{5}{3}\right) = \Phi\left(\frac{5}{3}\right) - (1 - \Phi(1)) = \Phi\left(\frac{5}{3}\right) + \Phi(1) - 1 $$
    * $\Phi\left(\frac{5}{3}\right)$ 和 $\Phi(1)$: 查标准正态分布表得到相应的值，然后计算。

> [!IMPORTANT] 核心步骤
> 遇到一般正态分布的概率计算问题：
> 1.  **标准化**：将相关的数值和随机变量都转换为标准正态下的形式。
> 2.  **查表/计算**：利用标准正态分布的性质和分布表来求解概率。