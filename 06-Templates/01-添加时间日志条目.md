<%*
// 获取当前北京时间
const now = new Date();
now.setHours(now.getHours() + 8); // 调整为北京时间 UTC+8

// 获取当前小时
let currentHour = now.getHours();

// 弹出对话框让用户选择时间段
const selectedHour = await tp.system.suggester(
  ["06:00", "07:00", "08:00", "09:00", "10:00", "11:00", "12:00", 
   "13:00", "14:00", "15:00", "16:00", "17:00", "18:00", 
   "19:00", "20:00", "21:00", "22:00", "23:00"],
  ["6", "7", "8", "9", "10", "11", "12", 
   "13", "14", "15", "16", "17", "18", 
   "19", "20", "21", "22", "23"],
  false,
  `选择时间段 (当前北京时间: ${currentHour}:${now.getMinutes().toString().padStart(2, '0')})`
);

if (!selectedHour) {
  // 如果用户取消，使用当前小时
  selectedHour = currentHour.toString();
}

// 确定时间段
const hour = parseInt(selectedHour);
const timeSlot = `${hour.toString().padStart(2, '0')}:00 - ${(hour + 1).toString().padStart(2, '0')}:00`;

// 弹出对话框让用户输入活动内容
const activity = await tp.system.prompt("您在做什么?", "");
if (!activity) return;

// 弹出对话框让用户选择分类
const category = await tp.system.suggester(
  ["工作", "学习", "生活", "健康", "休闲", "其他"],
  ["work", "learn", "life", "health", "leisure", "other"],
  false,
  "选择活动分类"
);
if (!category) return;

// 生成时间日志条目
const logEntry = `- [x] ${timeSlot}: ${activity} [category:: ${category}]`;
tR = logEntry;
%> 