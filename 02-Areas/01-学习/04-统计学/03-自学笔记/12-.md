# 离散程度的学习

## 导论

* 数据分析的大前提是数据的**变异性**。
* 数据是波动的，**离散程度**就是测量数据的波动程度的。
* 离散程度的定义往往借助于集中趋势，因此也被称为**离中趋势**。

## 异众比率 (Heterogeneity Index)

* **定义：** 非众数组的频数占总频数的比例。
* **符号：** 通常用 $v_o$ 表示。
* **计算方法：**
    * $v_o = \frac{\text{非众数组频数}}{\text{总频数}} = \frac{\text{总频数} - \text{众数组频数}}{\text{总频数}}$
    * 或者 $v_o = 1 - \frac{\text{众数组频数}}{\text{总频数}}$
* **例子：** 总频数 50，众数组频数 15。
    * $v_o = \frac{50 - 15}{50} = \frac{35}{50} = 0.7$
    * $v_o = 1 - \frac{15}{50} = 1 - 0.3 = 0.7$
* **解释：**
    * 异众比率**越大**：众数组占比越小，众数的代表性越差，数据波动程度越大。
    * 异众比率**越小**：众数组占比越大，众数的代表性越好，数据波动程度越小。

## 全距 / 极差 (Range)

* **定义：** 一组数据的最大值与最小值之差。
    * $R = \text{最大值} - \text{最小值}$
* **反映：** 这组数据的变化幅度。
* **解释：** 值越大，说明数据离散程度越大。
* **局限性：**
    * 只与最大值和最小值有关，容易受到**极端值**的影响。
    * 不考虑数据的**分布**。
* **例子：** 四组数据，全距都是 9-1=8，但分布（均匀、对称、有极端值、右偏）可能完全不同。
* **比喻：** 了解一个人的身材，却只能得到身高数据。

## 四分位距 / 内距 (Interquartile Range - IQR)

* **定义：** 上下四分位数之差。
    * $IQR = Q_3 - Q_1$
* **过程：** 将数据排序后四等分，得到下四分位数 ($Q_1$)、中位数 ($Q_2$)、上四分位数 ($Q_3$)。
* **理解：** 约等于中间 50% 数据的全距。
* **解释：**
    * 值越大：数据离散程度越大，中位数的代表性越差。
    * 值越小：中间 50% 数据围绕中位数小幅度波动，中位数的代表性越强。
* **局限性：** 和全距一样，只用到了数据的一部分信息，测量比较粗糙。

## 平均差 (Mean Absolute Deviation - MAD)

* **构造：** 借助于**全部**数据信息。计算每个数据与平均数的**距离**（绝对值），求和后除以 n。
* **公式：**
    * $MAD = \frac{\sum_{i=1}^n |x_i - \bar{x}|}{n}$ （样本数据，使用样本均值 $\bar{x}$）
    * 或者 $MAD = \frac{\sum_{i=1}^N |x_i - \mu|}{N}$ （总体数据，使用总体均值 $\mu$）
* **说明：**
    * 使用**绝对值**是为了避免离均差之和等于零的情况（算术平均数的性质）。
    * 分子 $\sum |x_i - \bar{x}|$ 衡量数据的**总波动**。
    * 除以 n 是为了**排除数据量**的影响，求平均波动。
* **例子：** 数据 1, 3, 8，均值 $\bar{x}=4$。
    * $MAD = \frac{|1-4| + |3-4| + |8-4|}{3} = \frac{|-3| + |-1| + |4|}{3} = \frac{3+1+4}{3} = \frac{8}{3} \approx 2.67$
* **优点：** 使用全部数据信息，考虑数据量。
* **缺点（不受青睐的原因）：**
    * **对离群值/极端值不敏感**（这是主要原因，导致其本职工作——衡量离散程度——做得不够好）。
        * 例子：两组数据均值都是 50，但一组集中，一组分散（有极端值），MAD 可能相等，不合理。
    * 数学性质差，不能求导（次要原因，与衡量离散程度本身关系不大）。

## 方差 (Variance)

* **改进：** 为了让衡量指标对极端值**更敏感**，将绝对值改为**平方**。
    * 离均值越远的数据，平方后对总波动的贡献被**放大**。
* **构造：** 平均的**离差平方**。
* **类型：**
    * **总体方差 ($\sigma^2$)：**
        * 公式：$\sigma^2 = \frac{\sum_{i=1}^N (x_i - \mu)^2}{N}$
        * 分母：总体数据量 $N$。
    * **样本方差 ($s^2$)：**
        * 公式：$s^2 = \frac{\sum_{i=1}^n (x_i - \bar{x})^2}{n-1}$
        * 分母：样本量减一 ($n-1$)，称为**自由度**。
* **自由度 (Degrees of Freedom - DOF)：**
    * **解释：** 独立偏差信息的个数。
    * **对于样本方差 (使用样本均值 $\bar{x}$)：**
        * 我们有 $n$ 个偏差 $(x_i - \bar{x})$。
        * 因为离均差之和 $\sum (x_i - \bar{x}) = 0$，所以知道其中任意 $n-1$ 个偏差，就可以确定最后一个。
        * 因此，只有 $n-1$ 个独立的偏差信息。自由度为 $n-1$。
    * **对于样本数据 (已知总体均值 $\mu$)：**
        * 我们有 $n$ 个偏差 $(x_i - \mu)$。
        * 此时 $\sum (x_i - \mu)$ **不一定等于零**。
        * 因此，这 $n$ 个偏差信息都是独立的。自由度为 $n$。
        * 公式：$\frac{\sum_{i=1}^n (x_i - \mu)^2}{n}$ （注意分母是 $n$）
    * **总结：** 自由度可以帮助理解后面章节的各种分布和统计量。从无偏性等角度也可以理解自由度（在推断统计部分会详细讲解）。
* **分组数据方差 (Variance for Grouped Data)：**
    * **思路：** 由于原始数据被分组掩盖，用每组的**组中值**代表该组的数据（伪还原），并乘以该组的频数。
    * **公式：**
        * 样本方差：$s^2 = \frac{\sum_{i=1}^k (midpoint_i - \bar{x})^2 \cdot frequency_i}{n-1}$
        * 总体方差：$\sigma^2 = \frac{\sum_{i=1}^k (midpoint_i - \mu)^2 \cdot frequency_i}{N}$
        * 其中 $k$ 是组数，$midpoint_i$ 是第 $i$ 组的组中值，$frequency_i$ 是第 $i$ 组的频数。
    * **分子构造：** 每组的 (组中值 - 均值)$^2$ 乘以频数，再对所有组求和。

## 标准差 (Standard Deviation - SD)

* **定义：** 方差的**平方根**。
    * 总体标准差：$\sigma = \sqrt{\sigma^2}$
    * 样本标准差：$s = \sqrt{s^2}$
* **单位：** 与原始数据**相同**。
    * 解释：方差的单位是原始数据单位的平方（如 $cm^2$），开方后变回原始单位（如 $cm$）。
* **作用：** 常用来衡量这组数据的**平均波动**情况。
* **解释：** 方差和标准差越大，说明这组数据的离散程度越大。
* **优点：** 单位与原始数据相同，解释实际问题更方便贴切。

## 离散系数 / 变异系数 (Coefficient of Variation - CV)

* **主要用途：** 用于**比较不同样本数据**的离散程度。
* **为什么不用标准差直接比较？**
    * **单位不同：** 例如，身高（cm）和体重（kg）的标准差无法直接比较。
    * **受原始数据取值大小影响：** 例如，婴儿身高和成人身高（单位都是 cm），标准差大小受整体水平影响，直接比较不妥。
* **构造：** 用**标准差除以均值**。
    * $CV = \frac{s}{\bar{x}}$ （对于样本数据）
    * $CV = \frac{\sigma}{\mu}$ （对于总体数据）
* **优点（克服标准差的局限）：**
    * **无量纲：** 单位相互抵消，是一个百分比或比例，没有单位。
    * **排除取值大小影响：** 除以均值（代表整体水平），衡量的是相对离散程度。
* **解释：**
    * CV 越小：均值代表性越好，数据稳定性越强，数据**相对**离散程度越小。
* **例子：** 射击选手 A 和 B 的成绩。计算各自的 CV。
    * $CV_A = \frac{s_A}{\bar{x}_A}$
    * $CV_B = \frac{s_B}{\bar{x}_B}$
    * 如果 $CV_B < CV_A$，说明 B 的离散系数更小，稳定性更强。
* **注意事项：**
    * 严格来说，只适用于**比率尺度**测量的数据（但实践中常放宽）。
    * 如果**均值接近零**，离散系数可能非常大，或对标准差的小波动非常敏感，此时要**谨慎使用**。