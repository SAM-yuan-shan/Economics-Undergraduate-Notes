大家好，我们之前讲过了，平稳序列和趋势型序列的预测，今天呢，我们把复合型序列的分解预测做一个补充，大家主要了解一下这个整体的思路。那么，复合型序列yt它主要包含趋势，季节，周期和随机成分。那我们使用的呢，是乘法模型，也就是说序列当中的每一个值啊，都可以分解成。这四个成分的成积其中。随机成分，
它是必然存在的。那么周期性呢？因为它的规律不明确，并且周期性需要一个很长跨度的序列才可能有所体现。所以序列里面的周期成分，我们一般是直接无视的啊圈，当它不存在。那么，至于这个趋势，我们已经学习了线性趋势，非线性趋势序列的预测。那么就剩下这个季节成分，所以今天我们这个新的知识。主要就是基于季节成分的发现和处理，那么从数学上看。
这个式子。啊，我们忽略了这个周期性啊，直接无视它，权当它不存在那么这个式子，我们两边同时除以季节成分。s.那么，剩下的这个右边其实是趋势型序列，那它包括趋势和随机成分，那么这种序列我们是可以做预测的。不管是线性趋势和非线性趋势，我们都已经学习了对应的预测方法，那么我们对趋势型序列做预测，在这个基础上首先做一个预测。
然后再把。季节成分盛过来。就是就可以实现啊，对原序列yt的一个预测，那么这是我们基于这样一个。模型的分析，那么在实际操作当中呢？分为以下几个步骤，第一个呢是确定并且分离季节成分，这个是最关键的一步。第二个呢，建立预测模型进行预测。实际上说的就是在原序列当中，把季节成分。去除掉之后，
这个基础上做了一个预测，那么最后一步说的是计算，最后预测值，也就是说在第二步，这个预测值基础上。你在这个基础上，再把季节成分乘回来，得到最后的预测值。那么这个是我们整个的一个思路。下面我们通过一个例子来演示一下呃，这个分解和预测的步骤，我们现在已经有的数据是。二零一五一六一七啊，这三年的啤酒销售量的季度数据。那我们的目标呢，
是预测二零一八年四个季度的啤酒销售量。在下面呢，是我们根据这个时间顺序做的折线图，我们在图上可以发现两个明显的特点。一个呢，是季节性啊，每年当中四个季度恰好就完成一个循环。第二个特点呢，是逐年增长的趋势。也就是说，这个序列当中，它的季节性和趋势性是很明显的。那么，下面我们来看一下具体的分解和预测的步骤，步骤，
一是通过移动平均得到趋势。t和季节比率s×I，那我们之前提到过移动平均的两个作用。一个是对平稳序列做预测，另外一个呢就是对序列对序列进行平滑和修匀的作用。呃平滑和修匀，我们今天呢，就是要利用移动平均的第二个作用就是平滑和修匀作用。那这个所谓的平滑和修匀，它实际上是针对这个序列。上上下下啊，起伏波动的那么在我们的这个序列当中是谁引起的？序列的上下起伏是就是季节和随机成分，所以我们平滑的目的呢，就是要把序列当中的季节和随机成分。
消除掉。那我们在利用移动平均对序列做预测的时候啊。呃，比如k=4。做移动平均做一目的呢，是做预测的话，那我们前四期一二三四期的平均。作为第五期的一个预测。那二三四五呢？二三四五期的平均作为第六期的预测。那么，以此类推，一直往下移动，那么到最后。这四期的移动平均就作为第13期的一个预测，
那么这个是移动平均在做预测时候的。用法。但是，在利用移动平均对序列进行修匀和平滑时，这个计算方法还是一样的，不同之处就是。移动平均值放置的位置会发生变化，它不会说这四期的移动平均值放到下一期。作为预测值。它现在要放在中间，什么意思呢？比如现在我们让k=3那么一二三七，我们计算一个均值出来放到哪里呢？放到他们的中间一期那么一二三期的中间一期，那就是第二期呗。
那就是第二期啊，这个移动均值与第二期对应，作为第二期的平滑值。那么，我们要移动平均下面二三四期计算的均值作为。第三期的。平滑值呃以此类推最后三期。做的均值啊。它是作为第11期的。平滑值啊，也就是说我们这个连续的三期计算，一个均值以后。作为中间这一期的平滑值。啊，那每一个移动平均值在这种情况下在k=3的时候，
每一个移动平均值都有一个t值与它对应。那如果k是等于四呢？呃k=4呃，现在我们的目标还是平滑修云。那么，这四期计算一个均值是很容易的事情，但是这四期的中间在哪里呢？这四期的中间在？二点五升。再加点五，它没有一个这个整数的题，跟它对应，那我们继续往下移动，那么这四个值。二三四五七，
它们计算一个均值。给与谁对应呢？也没有整数对应它们这这个对应的是三点五呃，也不是整数。那么，以此类推，一直到最后。这四个值算出来是哪一期的平滑值呢？是十点五。啊，没有整数与它对应。那么这个时候。就要对第一次。k=4的移动平均结果再进行一次移动，平均就是所谓的中心化。
那么，具体的操作呢？就是对第一次移动平均的结果，再进行一次k=2的。移动平均。那比如现在。30啊，是其实是前四项的移动平均，那么它位于中间，其实它对应的这个时间代码t十二点五。它是对应的t十二点五，那么这个三十一点二五呢？它实际上对应的是三点五。下面以此类推啊，它对应的就是四点五，
那么我们对这个结果再进行一个k=2的移动，平均会有一个什么效果呢？因为。这两个啊，进行一个平均的话，那么它的中间位置就是二点五和三点五的中间，那恰好就是三。所以这两个。的均值，三十点六二五对应的t就是三。那么，下面再进行。这两项的平均计算得出来的结果是32对应的t就是四。那么，以此类推。
进行一个k=2的移动平均之后。中心化的值啊，都与这个整数的t相对应了啊，那这这个呃k=3和k=4这两种情况呢，其实其实也告诉我们。如果我们的目的是平滑修匀的话。我们选了一个奇数的k。啊，就好比k=3的时候，那么你这个做一次就就就可以了。如果说是我们选择的是个偶数的k。那么，做完一次移动平均之后，还要再做一次k=2的移动平均就是这个所谓的中心化处理。那我们选择k=4，
可能是因为这个啤酒的销量恰好是一年内四个季度完成一个循环。如果我们得到的是这个阅读数据，那么我们可能就要选择k=12做第一次移动平均了。但是只要一开始选择的这个呃k是偶数，就要再进行一次这个中心化的处理，就是在第一次移动平均的结果上。再做一次k等k=2的移动平均。那我们现在。对这个啤酒的销量做了一次呃k=4的。移动平均，然后又做了一次中心化。得到了这一列数据，那么这一列数据是什么意思呢？这列意思这一列数据实际上就是。这个把季节和随机成分消除以后的数据。
那么y它等于t×s×I。那我们中心化这个数据等于是在y的基础上把。s和I消除了，那么就只剩下了t。啊，只剩下了t那么如果我们让y÷t。不就可以得到s×I了吗？对吧？那么y呢？其实它。中心化的数据呢？是它啊，就是这个t。那我们用二÷4啊，就可以得到一个季节比率啊，
就它叫做季节比率，那么实际上就是y。除以t啊，这个二。除以四啊，其实就是y÷t。就等于s×I那么现在我们得到的机械比率是s×I那我们的目标其实是什么呢？我们的目标是把。s单独分离出来。啊，那怎么去把这个在得到s×I的基础上，再把s得到呢？那具体的做法呢，就是按季度求季节比率的均值。那这个是我们求得的季节比率，
我们把同一年呢放在同一行。同一个季度放在同一列。然后求列的平均数呃，这里头的这个数值就是这个季节比率，我们按照。这样一个形式放放它，然后呢，求列的均值，那么第一个季度。两个数字的均值是零点八五二二，然后以此类推啊，都是两个数的均值。那么，我们得到的这个均值啊，就把。
随机成分消除掉了啊，因为季节比率本身是s×I，然后我们对季节比率按季度求均值。就把这个随机成分消除掉了。那么，消除掉了以后，那么这个均值是不是就是这个季节指数s呢？那它是不是就可以直接作为季节指数呢？这个不一定。我们还要算一下我们得到的这四个均值的均值是不是等于一啊，我们是要求这四个均值的均值是要等于一的。那么，现在我们算出来呢？它的这四个均值的均值是零点九九一零不到一啊，比一小一点，
那么这个时候呢，我们要做一个调整。就是对这四个均值同时乘以。一比上零点九九一零，比如说这个零点八五二二。乘以这样一个数字，就得到零点八六零零。呃，每一个均值呃，都乘以这样一个因子。进行一个放大的作用，就会得到最后一行的这四个数字。这四个数字，它们的均值就等于一了。那那这四个数字，
我们称为季节指数s。那这个时候。它不单单去除了呃，随机成分，同时它的均值等于一啊，那么这就符合季节指数的要求了。得到季节指数以后。那这个是季节指数，这个是原来的y我们用。y÷s也就是二÷3就会得到一个趋势，乘以随机成分的。这样一个序列，我们称为季节调整后的序列。那季节调整后的序列呢，其实是一个趋势性的序列。
在这这个右边这张图上呢，这个季节调整后的序列其实就是这些红色的点。啊红色的点，它呈现出一种线性趋势，所以呢，我们直接用一个这个回归预测的方法。把季节调整后的数据作为因变量。把时间代码t啊，作为自变量去做一个回归，我们就会得到这样一个估计的方程。那得到估计的方程以后，我们把时间代码t=1到16代进去就可以得到各期的预测值。那么，尤其是最后。13到16其实就是二零一八年的四个季度，
一二三四四个季度的。预测值。那么，现在这个预测值啊，你把十嗯十三十四十五十六带到这个式子当中来啊。就会得到四个这样的值，但是这四个值。呃，是我们排除了季节的影响呃，因为我们。这个啤酒销量除以了季节指数，也就是说把季节指数排除掉以后，得到的季节调整。然后用季节调整作为因变量，用时间代码作为自变量得到了回归模型，
然后再把时间代码带到这个回归方程当中。得到了这四个预测值，实际上就是。不包含季节影响，排除了季节影响之后的预测值，那我们现在。想要得到一个最终的预测结果，怎么办呢？就是让这四个值再分别去乘以对应的。季节指数就可以。呃，我们写到这里。比如说。咱们举个例子。那现在我们把t=13代进去，
那我们得到的。这个预测值是二十七点六六六二，再加上一点零三二四×13。那就是二零一八年的第一个季度。第一个季度的这个线性预测值，那么这个值。还要乘以它对应的季节指数是零点八六。零点八六才会得到那个最终的预测值，那就是我们后面这张表格当中。我们啤酒销量除以季节指数得到季节调整，用季节调整做因变量时间代码做自变量。啊，进行一个这个回归，得到这样一个估计的方程，然后把t。
等于一到16代到这个方程当中来。就会得到这样一个一列回归预测值，但是回归预测值是排除了季节影响的。那我们要再把季节影响给它乘进来，才是最终的预测值，那么这个最终的预测值实际上就是回归预测值。四啊，乘以季节指数三就会得到这个最后一列最终的预测值。啊，等于是季节乘一定要先排除掉，然后做预测，做完预测呢，就要再把季节乘回来。呃，这个是最后呢？
这个是我们的一个呃预测的效果，其实这个预测的效果其实都无所谓了，主要把这个。我们。这个呃步骤，它的一些思想，我们最后呢，再做一个简单的总结，那么一开始我们是。呃，有原始的复合型序列，它等于趋势乘以季节乘以。这个随机成分那么周期，我们就忽略掉了，我们首先呢是用这个移动平均。
然后再加一个中心化。对y呢？呃，进行移动平均以及中心化，那么移动平均和呃，中心化实际上就起到了一个修云的作用。那么，修云修的其实就是波动，那么谁带来的这个起起伏伏的波动呢？是s×I，也就是说我们。对y进行移动平均之后，实际上得到的是t。得到的是t，那么我们用y比上t就会得到s×I，
那么s×I还不够，我们要单独得到s怎么办？要对。s×I按照季度求均值。那得季度求均值之后，是不是就是季节指数s呢？不一定嗯，我们要看这个均值的均值，它是不是？等于一啊，均值的均值，如果等于一就可以直接作为季节指数去使用了，如果这几个均值。啊，这几个均值，
它的均值不是一就要进行调整啊，使得它们的均值是一就可以得到。这个。集结指数s了。那我们得到s以后呢，再用y比上s就等于。t×I。那么这个。y比上s就是季节调整。季节调整之后的数据就剩趋势和随机成分，那么趋势和随机成分我们很熟悉啊，我们有。学过对应的预测方法，那么在我们这个例子当中，我们用的是一个这个线性趋势预测的方法，
就是做一个回归。具体来说，就是季节调整之后的数据，就是只有趋势和随机成分的数据做因变量。时间代码t做自变量，做一个回归会得到一个估计的方程。然后我们把时间代码一到16都带进去，就会得到一个回归预测值，但是回归预测值。是针对这样一个序列啊，这样一个序列是排除了季节的影响之后的一个预测。那为了得到最终的预测，那么在回归预测值的基础上，再去乘以一个季节指数，再把这个x乘回来。
就会得到一个最终的预测值了，那这就是这个呃整体的一个步骤，可能有一点点绕啊嗯。你如果一次没没听明白呢，你就多听两遍，主要就是了解这个思想嗯，如果真的说是让大家手算那。就或者不可能的事啊。